<div id="container">
  <div id="graph-container"></div>
</div>
<script>
/**
 * This is an example on how to use sigma locate plugin on a real-world graph.
 */

 var g = {
   nodes: [],
   edges: []
 };

 // Create new Sigma instance in graph-container div (use your div name here)
 s = new sigma({
   graph: g,
   renderer: {
     container: document.getElementById('graph-container'),
     type: 'canvas',
   },
   settings: {
     enableEdgeHovering: true,
     edgeHoverColor: 'edge',
     defaultEdgeHoverColor: '#ccc',
     minEdgeSize: 0.5,
     maxEdgeSize: 4,
     edgeHoverSizeRatio: 1,
     edgeHoverExtremities: true,
     nodeActiveColor: 'default',
     borderSize: 2,
     outerBorderSize: 1,
     defaultNodeBorderColor: '#fff',
     nodeBorderColor: 'default',
     defaultNodeOuterBorderColor: 'rgb(236, 81, 72)',
   }
 });
 
 sigma.parsers.json(
   '/data',
   s,
   function() {
	 var nodes = s.graph.nodes();
	 for (var i = 0; i < nodes.length; i++) {
	   nodes[i].x = 100 * Math.cos(2 * i * Math.PI / nodes.length);
	   nodes[i].y = 100 * Math.sin(2 * i * Math.PI / nodes.length);
	   nodes[i].size = nodes[i].size;
	   nodes[i].color = '#0084B4';
     nodes[i].active = false;
	 }

	 for (var i = 0; i < s.graph.edges.length; i++) {
	   s.graph.edges[i].size = 3;
     s.graph.edges[i].active = false;
	 }

	 s.refresh();
 
	 sigma.layouts.startForceAtlas2(s, {
       worker: true,
	   autoStop: true,
	   background: true,
	   gravity: 0,
	   easing: 'cubicInOut'
	 });
 });

// the ActiveState plugin:
var activeState = sigma.plugins.activeState(s);

s.bind('clickNode', function(e) {
  angular.element.event.trigger({type:"show.person", person: e.data.node});
});
s.bind('overNode', function(e) {
  var ns = [], nodes = s.graph.nodes();
  activeState.dropNodes();
  activeState.dropEdges();
  activeState.setEdgesBy(function(edge){
    if(edge.startColor == undefined)
      edge.startColor = edge.color;
    if(edge.source == e.data.node.id){
      edge.color = '#BE1931';
      return true;
    } else
      edge.color = edge.startColor;
      return false;
  });
  angular.element.event.trigger({type:"show.person.small", person: e.data.node});
  s.refresh({skipIndexation: true});
});

</script>
