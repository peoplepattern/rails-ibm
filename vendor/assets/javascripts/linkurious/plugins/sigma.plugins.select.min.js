(function(){"use strict";function a(a,b){var c=a?a.length:0;if(!c)return[];var d=-1,e=[],f=b.length;a:for(;++d<c;){var g=a[d];if(g===g){for(var h=f;h--;)if(b[h]===g)continue a;e.push(g)}else b.indexOf(g)<0&&e.push(g)}return e}function b(a){h=32===a.which,f.removeEventListener("keydown",b,!1),f.addEventListener("keyup",c,!1)}function c(){h=!1,f.addEventListener("keydown",b,!1),f.removeEventListener("keyup",c,!1)}function d(c,d){function e(){d.dropEdges(),d.nodes().length===c.graph.nodes().length?d.dropNodes():d.addNodes(),c.refresh({skipIndexation:!0})}function i(){d.nodes().length&&null===g&&(g=d.nodes()[0].id)}function j(){c.renderers[0].container.lastChild.addEventListener("mousemove",i)}function k(){d.dropEdges(),d.dropNodes(),c.refresh({skipIndexation:!0})}function l(){c.graph.dropNodes(d.nodes().map(function(a){return a.id})),c.graph.dropEdges(d.edges().map(function(a){return a.id})),c.refresh()}function m(){d.addNeighbors(),c.refresh({skipIndexation:!0})}function n(){d.dropEdges(),d.setNodesBy(function(a){return 0===c.graph.degree(a.id)}),c.refresh({skipIndexation:!0})}function o(){d.dropEdges(),d.setNodesBy(function(a){return 1===c.graph.adjacentNodes(a.id).length}),c.refresh({skipIndexation:!0})}var p=!1,q=null,r=null;f=f||document.getElementsByTagName("body")[0],sigma.plugins.dragNodes&&c.renderers[0].container.lastChild.addEventListener("mousedown",j),this.clickNodesHandler=function(b){if(!p){var e=b.data.node.map(function(a){return a.id}),f=d.nodes().map(function(a){return a.id}),i=a(e,f);if(d.dropEdges(),h){var j=a(e,i);d.dropNodes(j)}else p||(d.dropNodes(),g=null),f.length>1&&d.addNodes(e),d.nodes().length&&sigma.plugins.dragNodes&&(g===d.nodes()[0].id?(d.dropNodes(),g=null):g=d.nodes()[0].id);d.addNodes(i),c.refresh({skipIndexation:!0})}},this.clickEdgesHandler=function(b){if(!p){var e=b.data.edge.map(function(a){return a.id}),f=d.edges().map(function(a){return a.id}),g=a(e,f);if(d.dropNodes(),h){var i=a(e,g);d.dropEdges(i)}else d.dropEdges(),f.length>1&&d.addEdges(e);d.addEdges(g),c.refresh({skipIndexation:!0})}},this.dragHandler=function(){p=!0},this.dropHandler=function(){setTimeout(function(){p=!1},300)},c.bind("clickNodes",this.clickNodesHandler),c.bind("clickEdges",this.clickEdgesHandler),this.bindDragNodes=function(a){q=a,q.bind("drag",this.dragHandler),q.bind("drop",this.dropHandler)},this.unbindDragNodes=function(){q&&(q.unbind("drag",this.dragHandler),q.unbind("drop",this.dropHandler),p=!1,q=null)},f.addEventListener("keydown",b,!1),this.bindKeyboard=function(a){r=a,r.bind("32+65 18+32+65",e),r.bind("32+85 18+32+85",k),r.bind("32+46 18+32+46",l),r.bind("32+69 18+32+69",m),r.bind("32+73 18+32+73",n),r.bind("32+76 18+32+76",o)},this.unbindKeyboard=function(){r&&(r.unbind("32+65 18+32+65",e),r.unbind("32+85 18+32+85",k),r.unbind("32+46 18+32+46",l),r.unbind("32+69 18+32+69",m),r.unbind("32+73 18+32+73",n),r.unbind("32+76 18+32+76",o),r=null)}}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var e={},f=null,g=null,h=!1;sigma.plugins.select=function(a,b){return e[a.id]||(e[a.id]=new d(a,b),a.bind("kill",function(){sigma.plugins.killSelect(a)})),e[a.id]},sigma.plugins.killSelect=function(a){e[a.id]instanceof d&&(a.unbind("clickNodes",e[a.id].clickNodesHandler),a.unbind("clickEdges",e[a.id].clickEdgesHandler),e[a.id].unbindKeyboard(),e[a.id].unbindDragNodes(),delete e[a.id]),!e.length&&f&&(f.removeEventListener("keydown",b,!1),f.removeEventListener("keyup",c,!1),f=null)}}).call(this);
//# sourceMappingURL=sigma.plugins.select.min.js.map