(function(){"use strict";function a(a){var b=a.settings("autoRescale");return b?Array.isArray(b)?-1!==b.indexOf("nodePosition"):!0:!1}function b(a,b){var c,d,e=-(1/0),f=1/0,g=1/0,h=-(1/0),i=-(1/0);for(c=0,d=a.length;d>c;c++)e=Math.max(a[c][b+"size"],e),h=Math.max(a[c][b+"x"],h),f=Math.min(a[c][b+"x"],f),i=Math.max(a[c][b+"y"],i),g=Math.min(a[c][b+"y"],g);return e=e||1,{sizeMax:e,minX:f,minY:g,maxX:h,maxY:i}}function c(c,e){function f(b){var c,d,e,f,g;if(c=.5*(b.minX+b.maxX),d=.5*(b.minY+b.maxY),a(h)){var i,j,k,l,m;m=h.camera.getRectangle(b.maxX-b.minX,b.maxY-b.minY),f=m.x2-m.x1||1,g=m.height||1,i=sigma.utils.getBoundaries(h.graph,h.camera.readPrefix),j=h.camera.getRectangle(i.maxX-i.minX,i.maxY-i.minY),k=j.x2-j.x1||1,l=j.height||1,e=Math.max(f/k,g/l)}else f=b.maxX-b.minX+2*b.sizeMax,g=b.maxY-b.minY+2*b.sizeMax,e=Math.max(f/h.renderers[0].width,g/h.renderers[0].height);return e=Math.max(h.settings("zoomMin"),Math.min(h.settings("zoomMax"),e)),{x:c,y:d,ratio:e}}var g=this,h=c,i=sigma.utils.extend(e,d);i.zoomDef=i.zoomDef||h.settings("zoomMax"),h.bind("kill",function(){sigma.plugins.killLocate(h)}),this.nodes=function(d,e){if(arguments.length<1)throw new TypeError("Too few arguments.");if(3===arguments.length&&"object"!=typeof e)throw new TypeError('Invalid argument: "options" is not an object, was '+e);var g,j,k=sigma.utils.extend(e,i.animation.node),l=(h.camera.ratio,a(h));if("string"==typeof d||"number"==typeof d){if(j=h.graph.nodes(d),void 0===j)throw new Error('Invalid argument: the node of id "'+d+'" does not exist.');g={x:j[h.camera.readPrefix+"x"],y:j[h.camera.readPrefix+"y"],ratio:l?h.settings("zoomMin"):i.zoomDef}}else{if(!Array.isArray(d))throw new TypeError('Invalid argument: "v" is not a string, a number, or an array, was '+d);var m=b(d.map(function(a){return h.graph.nodes(a)}),h.camera.readPrefix);g=f(m)}return i.focusOut&&l?sigma.misc.animation.camera(c.camera,{x:.5*(h.camera.x+g.x),y:.5*(h.camera.y+g.y),ratio:i.zoomDef},{duration:k.duration,onComplete:function(){sigma.misc.animation.camera(h.camera,g,k)}}):sigma.misc.animation.camera(h.camera,g,k),this},this.edges=function(d,e){if(arguments.length<1)throw new TypeError("Too few arguments.");if(3===arguments.length&&"object"!=typeof e)throw new TypeError('Invalid argument: "options" is not an object, was '+e);var g,j,k,l=sigma.utils.extend(e,i.animation.edge),m=(h.camera.ratio,a(h));if("string"==typeof d||"number"==typeof d){if(j=h.graph.edges(d),void 0===j)throw new Error('Invalid argument: the edge of id "'+d+'" does not exist.');k=b([h.graph.nodes(j.source),h.graph.nodes(j.target)],h.camera.readPrefix),g=f(k)}else{if(!Array.isArray(d))throw new TypeError('Invalid argument: "v" is not a string or a number, or an array, was '+d);var n,o,p=[];for(n=0,o=d.length;o>n;n++)j=h.graph.edges(d[n]),p.push(h.graph.nodes(j.source)),p.push(h.graph.nodes(j.target));k=b(p,h.camera.readPrefix),g=f(k)}return i.focusOut&&m?sigma.misc.animation.camera(c.camera,{x:.5*(h.camera.x+g.x),y:.5*(h.camera.y+g.y),ratio:i.zoomDef},{duration:l.duration,onComplete:function(){sigma.misc.animation.camera(h.camera,g,l)}}):sigma.misc.animation.camera(h.camera,g,l),this},this.center=function(a,b){var c=sigma.utils.extend(b,i.animation.center);return h.graph.nodes().length?g.nodes(h.graph.nodes().map(function(a){return a.id}),c):sigma.misc.animation.camera(h.camera,{x:0,y:0,ratio:a},c),this},this.kill=function(){i=null,h=null}}if("undefined"==typeof sigma)throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins");var d={animation:{node:{duration:300},edge:{duration:300},center:{duration:300}},focusOut:!1,zoomDef:null},e={};sigma.plugins.locate=function(a,b){return e[a.id]||(e[a.id]=new c(a,b)),e[a.id]},sigma.plugins.killLocate=function(a){e[a.id]instanceof c&&e[a.id].kill(),delete e[a.id]}}).call(window);
//# sourceMappingURL=sigma.plugins.locate.min.js.map